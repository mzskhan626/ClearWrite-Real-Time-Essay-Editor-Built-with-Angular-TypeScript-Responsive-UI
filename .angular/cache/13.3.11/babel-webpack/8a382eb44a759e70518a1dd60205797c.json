{"ast":null,"code":"import { EssayService } from '../shared/essay.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/essay.service\";\nimport * as i2 from \"@angular/forms\";\nexport let EssayEditorComponent = /*#__PURE__*/(() => {\n  class EssayEditorComponent {\n    constructor(essayService) {\n      this.essayService = essayService;\n      this.essayText = '';\n      this.highlightedText = '';\n    }\n\n    ngOnInit() {\n      this.essayService.essayText$.subscribe(text => {\n        this.essayText = text;\n        this.updateHighlight();\n      });\n      this.essayService.flaggedSentence$.subscribe(() => {\n        this.updateHighlight();\n      });\n    }\n\n    onEssayChange(newText) {\n      this.essayService.setEssayText(newText);\n      this.updateHighlight();\n    }\n\n    updateHighlight() {\n      const flag = this.essayService.flaggedSentence$.value;\n\n      if (!flag) {\n        this.highlightedText = this.essayText;\n        return;\n      }\n\n      const escapedFlag = flag.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n      const regex = new RegExp(escapedFlag, 'gi');\n      this.highlightedText = this.essayText.replace(regex, match => `<mark>${match}</mark>`);\n    }\n\n  }\n\n  EssayEditorComponent.ɵfac = function EssayEditorComponent_Factory(t) {\n    return new (t || EssayEditorComponent)(i0.ɵɵdirectiveInject(i1.EssayService));\n  };\n\n  EssayEditorComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EssayEditorComponent,\n    selectors: [[\"app-essay-editor\"]],\n    decls: 6,\n    vars: 2,\n    consts: [[1, \"essay-editor\"], [\"rows\", \"20\", \"cols\", \"50\", \"placeholder\", \"Type or paste your essay here...\", 1, \"essay-textarea\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [1, \"highlighted\", 3, \"innerHTML\"]],\n    template: function EssayEditorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\");\n        i0.ɵɵtext(2, \"Essay Editor\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"textarea\", 1);\n        i0.ɵɵlistener(\"ngModelChange\", function EssayEditorComponent_Template_textarea_ngModelChange_3_listener($event) {\n          return ctx.essayText = $event;\n        })(\"input\", function EssayEditorComponent_Template_textarea_input_3_listener($event) {\n          return ctx.onEssayChange($event.target.value);\n        });\n        i0.ɵɵtext(4, \"  \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(5, \"div\", 2);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.essayText);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"innerHTML\", ctx.highlightedText, i0.ɵɵsanitizeHtml);\n      }\n    },\n    directives: [i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel],\n    styles: [\".essay-editor[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.essay-textarea[_ngcontent-%COMP%]{width:100%;min-height:200px;font-size:1rem;padding:10px;border:1px solid #ccc;border-radius:4px;resize:vertical}.highlighted[_ngcontent-%COMP%]{white-space:pre-wrap;background:#f6f8fa;padding:10px;border:1px solid #eee;border-radius:4px;min-height:100px}.panel-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.panel-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:8px;font-size:1rem;border:1px solid #bbb;border-radius:4px}.panel-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;font-size:1rem;border:none;border-radius:4px;background:#1976d2;color:#fff;cursor:pointer;margin-top:4px;transition:background .2s}.panel-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#1565c0}mark[_ngcontent-%COMP%]{background:#ffe082;color:#333;border-radius:2px;padding:0 2px}\"]\n  });\n  return EssayEditorComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}