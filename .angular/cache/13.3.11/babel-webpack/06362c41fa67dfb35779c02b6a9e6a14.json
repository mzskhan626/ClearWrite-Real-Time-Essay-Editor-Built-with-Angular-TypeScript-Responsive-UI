{"ast":null,"code":"import { EssayService } from '../shared/essay.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/essay.service\";\nimport * as i2 from \"@angular/forms\";\nexport let FlagSuggestPanelComponent = /*#__PURE__*/(() => {\n  class FlagSuggestPanelComponent {\n    constructor(essayService) {\n      this.essayService = essayService;\n      this.flaggedSentence = '';\n      this.suggestion = '';\n      this.essayService.flaggedSentence$.subscribe(val => this.flaggedSentence = val);\n      this.essayService.suggestion$.subscribe(val => this.suggestion = val);\n    }\n\n    onFlaggedSentenceChange(value) {\n      this.essayService.setFlaggedSentence(value);\n    }\n\n    onSuggestionChange(value) {\n      this.essayService.setSuggestion(value);\n    }\n\n    applySuggestion() {\n      const essay = this.essayService.essayText$.value;\n      const flag = this.flaggedSentence;\n      const suggestion = this.suggestion;\n      if (!flag || !suggestion) return;\n      const escapedFlag = flag.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n      const regex = new RegExp(escapedFlag, 'gi');\n      const newEssay = essay.replace(regex, suggestion);\n      this.essayService.setEssayText(newEssay);\n      this.essayService.setFlaggedSentence('');\n      this.essayService.setSuggestion('');\n    }\n\n    undo() {\n      this.essayService.undo();\n    }\n\n  }\n\n  FlagSuggestPanelComponent.ɵfac = function FlagSuggestPanelComponent_Factory(t) {\n    return new (t || FlagSuggestPanelComponent)(i0.ɵɵdirectiveInject(i1.EssayService));\n  };\n\n  FlagSuggestPanelComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FlagSuggestPanelComponent,\n    selectors: [[\"app-flag-suggest-panel\"]],\n    decls: 7,\n    vars: 2,\n    consts: [[1, \"panel-container\"], [\"type\", \"text\", \"id\", \"flaggedSentence\", \"placeholder\", \"Type a sentence to flag\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [\"type\", \"text\", \"id\", \"suggestion\", \"placeholder\", \"Suggested improvement\", 3, \"ngModel\", \"ngModelChange\", \"input\"], [3, \"click\"]],\n    template: function FlagSuggestPanelComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"input\", 1);\n        i0.ɵɵlistener(\"ngModelChange\", function FlagSuggestPanelComponent_Template_input_ngModelChange_1_listener($event) {\n          return ctx.flaggedSentence = $event;\n        })(\"input\", function FlagSuggestPanelComponent_Template_input_input_1_listener($event) {\n          return ctx.onFlaggedSentenceChange($event.target.value);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"input\", 2);\n        i0.ɵɵlistener(\"ngModelChange\", function FlagSuggestPanelComponent_Template_input_ngModelChange_2_listener($event) {\n          return ctx.suggestion = $event;\n        })(\"input\", function FlagSuggestPanelComponent_Template_input_input_2_listener($event) {\n          return ctx.onSuggestionChange($event.target.value);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function FlagSuggestPanelComponent_Template_button_click_3_listener() {\n          return ctx.applySuggestion();\n        });\n        i0.ɵɵtext(4, \"Apply\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function FlagSuggestPanelComponent_Template_button_click_5_listener() {\n          return ctx.undo();\n        });\n        i0.ɵɵtext(6, \"Undo\");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.flaggedSentence);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngModel\", ctx.suggestion);\n      }\n    },\n    directives: [i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel],\n    styles: [\".flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:20px}.flag-suggest-panel[_ngcontent-%COMP%]{width:300px;margin-left:20px}.input-field[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:10px;border:1px solid #ccc;border-radius:4px}.apply-button[_ngcontent-%COMP%]{padding:10px 15px;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}.apply-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.highlight[_ngcontent-%COMP%]{background-color:#ff0}\"]\n  });\n  return FlagSuggestPanelComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}